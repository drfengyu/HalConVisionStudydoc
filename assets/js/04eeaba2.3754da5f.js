"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8133],{21341:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var s=n(96540),a=n(10781),i=n(94335),r=n(49287),l=n(33263),u=n(74848);const o="YOUR_GITHUB_TOKEN",c="YOUR_GITHUB_USERNAME",d="YOUR_REPO_NAME",h="main",p=new l.A;function x(){const[e,t]=(0,s.useState)(""),[n,a]=(0,s.useState)(""),[l,x]=(0,s.useState)(""),[j,b]=(0,s.useState)(""),[g,m]=(0,s.useState)(""),[v,y]=(0,s.useState)(!1),[$,C]=(0,s.useState)("");return(0,u.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),y(!0),C("");const r=`blog/${e.replace(/\s+/g,"-")}.md`,u=j.split(",").map((e=>e.trim())),p=`---\ntitle: "${e}"\nauthor: "${n}"\nauthorImage: "${l}"\ntags: [${u.map((e=>`"${e}"`)).join(", ")}]\n---\n\n${g}`,v=btoa(unescape(encodeURIComponent(p))),$={message:`Add blog post: ${e}`,content:v,branch:h};try{201===(await i.A.put(`https://api.github.com/repos/${c}/${d}/contents/${r}`,$,{headers:{Authorization:`token ${o}`,"Content-Type":"application/json"}})).status&&(C("\u6587\u7ae0\u63d0\u4ea4\u6210\u529f\uff01"),t(""),a(""),x(""),b(""),m(""))}catch(S){console.error("Error submitting post:",S),C("\u63d0\u4ea4\u6587\u7ae0\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u63a7\u5236\u53f0\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002")}finally{y(!1)}},children:[(0,u.jsx)("h1",{children:"\u53d1\u5e03\u535a\u5ba2"}),(0,u.jsx)("div",{children:(0,u.jsxs)("label",{children:["\u6587\u7ae0\u6807\u9898:",(0,u.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0})]})}),(0,u.jsx)("div",{children:(0,u.jsxs)("label",{children:["\u4f5c\u8005\u540d:",(0,u.jsx)("input",{type:"text",value:n,onChange:e=>a(e.target.value),required:!0})]})}),(0,u.jsx)("div",{children:(0,u.jsxs)("label",{children:["\u4f5c\u8005\u56fe\u50cf URL:",(0,u.jsx)("input",{type:"text",value:l,onChange:e=>x(e.target.value),required:!0})]})}),(0,u.jsx)("div",{children:(0,u.jsxs)("label",{children:["\u6587\u7ae0\u6807\u7b7e (\u7528\u9017\u53f7\u5206\u9694):",(0,u.jsx)("input",{type:"text",value:j,onChange:e=>b(e.target.value),required:!0})]})}),(0,u.jsx)("div",{children:(0,u.jsxs)("label",{children:["\u6587\u7ae0\u5185\u5bb9 (Markdown):",(0,u.jsx)(r.Ay,{value:g,style:{height:"300px"},renderHTML:e=>p.render(e),onChange:e=>{let{text:t}=e;m(t)}})]})}),(0,u.jsx)("button",{type:"submit",disabled:v,children:v?"\u63d0\u4ea4\u4e2d...":"\u63d0\u4ea4\u6587\u7ae0"}),$&&(0,u.jsx)("p",{children:$})]})}const j=function(){return(0,u.jsx)(a.A,{title:"\u53d1\u5e03\u535a\u5ba2",description:"\u63d0\u4ea4\u4f60\u7684\u535a\u5ba2\u6587\u7ae0",children:(0,u.jsx)("main",{className:"submit-post-container",children:(0,u.jsx)(x,{})})})}}}]);